<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<title>至尊五行符仙葫模拟器</title>
<style>
    body { background-color: #000000; color: #000000; font-family: '黑体'; font-size: 24px; font-weight: bold; }
    #goldDisplay, #openCount, #consumedValue { color: red; font-weight: bold; }
    button { margin: 5px; }
    .result, .stats, .value { border: 1px solid black; background-color: white; padding: 10px; margin-top: 5px; text-align: center; }
    .stats div, .value div { display: inline-block; width: 19%; }
</style>
</head>
<body>
<div id="goldDisplay">金币: 1000</div>
<button onclick="openSimulator(false)">开一次</button>
<button onclick="openSimulator(true)">十连</button>
<div id="resultArea" class="result">结果显示区域</div>
<div id="statsArea" class="stats">
    <div>金符</div><div>木符</div><div>水符</div><div>火符</div><div>土符</div>
</div>
<div id="valueArea" class="value">出货价值区域</div>
<button onclick="sell()">贩卖</button>
<button onclick="reset()">清零</button>
<script>
    const elements = {
        goldDisplay: document.getElementById('goldDisplay'),
        resultArea: document.getElementById('resultArea'),
        statsArea: document.getElementById('statsArea'),
        valueArea: document.getElementById('valueArea')
    };
    let gold = 1000, openCount = 0, consumedValue = 0, totalValue = 0, stats = {金: [0, 0, 0, 0, 0], 木: [0, 0, 0, 0, 0], 水: [0, 0, 0, 0, 0], 火: [0, 0, 0, 0, 0], 土: [0, 0, 0, 0, 0]};
    const symbolTypes = ['金', '木', '水', '火', '土'];
    const qualityValues = [84, 12.6, 2.6, 0.5, 0.5];
    const qualityColors = ['red', 'blue', 'orange', 'green', 'purple'];
    const probabilities = [0.38, 4, 4.2, 6, 5.4];

    function randomResult() {
        let rand = Math.random() * 100;
        let cumulative = 0;
        for (let quality = 0; quality < 5; quality++) {
            for (let type = 0; type < 5; type++) {
                cumulative += probabilities[quality];
                if (rand < cumulative) {
                    let color = qualityColors[Math.floor(Math.random() * 5)];
                    return { symbol: symbolTypes[type], quality, color };
                }
            }
        }
    }

    function displayResult(result) {
        return `<span style='color: ${result.color}'>${result.symbol}符 ${5-result.quality}等</span>`;
    }

    function updateDisplay() {
        elements.goldDisplay.innerHTML = `金币: ${gold.toFixed(1)}`;
        elements.valueArea.innerHTML = `您累计开出价值${totalValue.toFixed(1)}元的五行符`;
        let statsHtml = '';
        symbolTypes.forEach((type, index) => {
            statsHtml += `<div>${stats[type].map((count, i) => `${5-i}等: ${count}`).join('<br>')}</div>`;
        });
        elements.statsArea.innerHTML = statsHtml;
    }

    function openSimulator(tenTimes) {
        if (gold < 9.5) {
            alert('赌海无涯，回头是岸');
            reset();
            return;
        }
        let results = [];
        let count = tenTimes ? 10 : 1;
        for (let i = 0; i < count; i++) {
            let result = randomResult();
            results.push(result);
            stats[result.symbol][result.quality]++;
            totalValue += qualityValues[result.quality];
            gold -= 9.5;
        }
        elements.resultArea.innerHTML = results.map(displayResult).join('<br>');
        updateDisplay();
    }

    function sell() {
        stats = {金: [0, 0, 0, 0, 0], 木: [0, 0, 0, 0, 0], 水: [0, 0, 0, 0, 0], 火: [0, 0, 0, 0, 0], 土: [0, 0, 0, 0, 0]};
        totalValue = 0;
        updateDisplay();
    }

    function reset() {
        gold = 1000;
        totalValue = 0;
        stats = {金: [0, 0, 0, 0, 0], 木: [0, 0, 0, 0, 0], 水: [0, 0, 0, 0, 0], 火: [0, 0, 0, 0, 0], 土: [0, 0, 0, 0, 0]};
        updateDisplay();
    }

    updateDisplay();
</script>
</body>
</html>

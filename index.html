<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>至尊五行符仙葫模拟器</title>
    <style>
        body {
            background-color: #000000;
            color: #000000;
            font-family: '黑体';
            font-size: 24px;
            font-weight: bold;
            text-align: center;
        }
        button {
            margin: 10px;
            font-size: 24px;
        }
        #results, #stats {
            margin-top: 20px;
            border: 1px solid black;
            background-color: white;
            color: black;
            font-size: 20px;
            padding: 10px;
            width: 70%;
            margin-left: auto;
            margin-right: auto;
        }
        .red { color: red; }
        .blue { color: blue; }
        .orange { color: orange; }
        .green { color: green; }
        .purple { color: purple; }
    </style>
</head>
<body>
    <h1>至尊五行符仙葫模拟器</h1>
    <button onclick="openOnce()">开一次</button>
    <button onclick="openTen()">十连</button>
    <div id="results">结果将显示在这里</div>
    <div id="stats">统计信息将显示在这里</div>
    <button onclick="reset()">清零</button>

    <script>
        const elements = ["金", "木", "水", "火", "土"];
        const qualities = ["一等", "二等", "三等", "四等", "五等"];
        const colors = ["red", "blue", "orange", "green", "purple"];
        const probabilities = [
            1.38, 3, 4.2, 6, 5.4, // 一等到五等的概率
        ];
        let counts = {};
        let totalOpens = 0;
        let totalCost = 0;

        function randomResult() {
            let elementIndex = Math.floor(Math.random() * elements.length);
            let qualityIndex = weightedRandom(probabilities);
            let colorIndex = Math.floor(Math.random() * colors.length);

            let element = elements[elementIndex];
            let quality = qualities[qualityIndex];
            let color = colors[colorIndex];

            let result = `<span class="${color}">${element}符 ${quality}</span>`;
            updateCounts(`${element}符 ${quality}`);
            return result;
        }

        function weightedRandom(weights) {
            let totalWeight = weights.reduce((acc, cur) => acc + cur, 0);
            let r = Math.random() * totalWeight;
            let weightSum = 0;

            for (let i = 0; i < weights.length; i++) {
                weightSum += weights[i];
                if (r <= weightSum) return i;
            }
            return 0;
        }

        function openOnce() {
            let result = randomResult();
            document.getElementById('results').innerHTML = result;
            updateStats();
        }

        function openTen() {
            let results = [];
            for (let i = 0; i < 10; i++) {
                results.push(randomResult());
            }
            document.getElementById('results').innerHTML = results.join("<br>");
            updateStats();
        }

        function updateCounts(result) {
            counts[result] = (counts[result] || 0) + 1;
            totalOpens++;
            totalCost += 9.5;
        }

        function updateStats() {
            let statsHTML = `已开启<span class="red">${totalOpens}</span>次<br>`;
            statsHTML += `您已消耗价值<span class="red">${totalCost.toFixed(2)}</span>元的至尊五星符仙葫<br>`;
            for (let key in counts) {
                statsHTML += `${key}: ${counts[key]}次<br>`;
            }
            document.getElementById('stats').innerHTML = statsHTML;

            if (totalOpens % 100 === 0) {
                let rareCount = elements.reduce((sum, el) => sum + (counts[`${el}符 一等`] || 0), 0);
                if (rareCount < 5) {
                    alert("非酋，还不收手吗？");
                }
            }
        }

        function reset() {
            counts = {};
            totalOpens = 0;
            totalCost = 0;
            document.getElementById('results').innerHTML = "结果将显示在这里";
            document.getElementById('stats').innerHTML = "统计信息将显示在这里";
        }
    </script>
</body>
</html>
